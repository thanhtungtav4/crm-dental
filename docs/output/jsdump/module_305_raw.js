305:function(e,t,n){"use strict";var a=n(2),r=n(8),i=n(158),o=n(137),c=n(635),l=n(124),u=n(197),s=n(132),h=n(52),d=n(114),m=n(93),p=n(65),f=n(119),g=n(1),v=n(7),E=n.n(v),T=n(55),C=n(88),b=n(0),A=n.n(b),y=n(23),O=n(9),L=n(41),N=n(230),S=n(94),M=n(32),P={remindAppointment:"APPOINTMENT",remindMedicationSchedule:"PRESCRIPTION",takeCareAfterExam:"TREATMENT",remindBirthday:"BIRTHDAY",syntheticCustomer:"OTHER",customerCareTotal:"COMMON"},D=N.c.filter(function(e){return"COMMON"!==e.id&&"BIRTHDAY"!==e.id});t.a=function(e){var t,n=e.show,v=e.hide,R=e.setSentId,_=e.patientId,w=e.dataCol,I=e.forceUpdate,j=e.forceUpdateMainTable,x=e.defaultTab,k=e.isCallFromCustomerCareSuccess,H=void 0!==k&&k,F=e.type,V=e.dataListCare,B=void 0===V?[]:V,X=e.isCreateFromSyntheticCustomer,Z=void 0!==X&&X,G=e.isShowEmployeesCare,U=void 0!==G&&G,Y=e.enableEditNotiCategory,z=void 0!==Y&&Y,K=e.isCreateMessage,Q=void 0!==K&&K,W=e.hideCareTotal,q=void 0!==W&&W,J=Object(O.e)(function(e){return{account:e.account.account}}).account,$=E()().hours(),ee=E()().minutes(),te=Object(y.c)().t,ne=Object(O.d)(),ae=Object(C.d)(),re=Object(r.a)(ae,1)[0],ie=Object(N.e)(),oe=Object(b.useState)(!1),ce=Object(r.a)(oe,2),le=ce[0],ue=ce[1],se=Object(O.e)(function(e){var t;return null===(t=e.callCenter.callingInfo)||void 0===t?void 0:t.content}),he=Object(N.f)(),de=Object(N.g)(),me=function(e,t){for(var n=[],a=e;a<t;a++)n.push(a);return n};return Object(b.useEffect)(function(){H&&re.setFieldsValue({result:se})},[se,H]),A.a.createElement(m.a,{visible:n,width:700,title:te("patientCareCreate"),onClose:v},A.a.createElement(s.a,{form:re,onSubmit:function(e){var t=Object(a.a)(Object(a.a)({},e),{},{patientId:_,refId:null===w||void 0===w?void 0:w.refId,status:le?"SENDING":null===e||void 0===e?void 0:e.status,creator:null===J||void 0===J?void 0:J.id,messageId:de,type:F?(null===w||void 0===w?void 0:w.type)||(null===e||void 0===e?void 0:e.type):void 0,content:Z?null===w||void 0===w?void 0:w.content:void 0});t.time=E()(e.time).format(g.l.DATE_FORMAT.HH_MM_SS),t.sentDate=E()("".concat(E()(e.sentDate).format(g.l.DATE_FORMAT.YYYY_MM_DD)).concat(t.time),g.l.DATE_FORMAT.YYYY_MM_DD_HH_MM_SS).toISOString();try{(null===w||void 0===w?void 0:w.id)?Object(l.u)(Object(a.a)(Object(a.a)({},t),{},{id:null===w||void 0===w?void 0:w.id})).then(function(){v(),Q?Object(M.a)("success",te("addSuccessfully"),1.5):Object(M.a)("success",te("updateSuccessfully"),1.5),I&&I(),j&&j()}):Object(l.a)(t).then(function(e){R&&R(e.data.id),H&&ne(Object(L.l)(Object(a.a)(Object(a.a)({},w),{},{sentId:e.data.id}))),v(),Object(M.a)("success",te("addSuccessfully"),1.5),I&&I(),j&&j()})}catch(n){throw n}},onCancel:v,isLoading:!1,onValuesChange:function(e){if(e.hasOwnProperty("notiType")){var t=e.notiType===g.h.zalo;ue(t),t&&re.resetFields(["sentDate","time","status"])}}},A.a.createElement(i.a,{gutter:12},A.a.createElement(o.a,{span:12},A.a.createElement(h.d,{component:u.a,name:"sentDate",label:te("time"),initialValue:E()(),required:!0,rules:[{required:!0,message:"".concat(te("pleaseEnterDate"))}],propsComponent:{disabled:le||H,format:g.Nb,placeholder:g.cb,disabledDate:function(e){return e&&e>E()().endOf("day")}}})),A.a.createElement(o.a,{span:12},A.a.createElement(h.d,{name:"time",label:" ",component:c.a,initialValue:E()(),rules:[{required:!0,message:"".concat(te("pleaseEnterTime"))}],propsComponent:{disabled:le||H,allowClear:!0,format:g.l.DATE_FORMAT.HH_MM,disabledHours:function(){return E()().isSameOrBefore(re.getFieldValue("sentDate"),"date")&&me(0,24).splice($+1,24)},disabledMinutes:function(){return E()().isSameOrBefore(re.getFieldValue("sentDate"),"date")&&me(0,60).splice(ee+1,60)},placeholder:te("Select time"),minuteStep:5}}))),A.a.createElement(i.a,{gutter:12},A.a.createElement(o.a,{span:12},A.a.createElement(h.d,{name:"notiType",initialValue:he,label:x===T.a.remindBirthday?te("careChanel"):A.a.createElement(d.a,{helpText:te("zaloNotiTypeHelp"),text:te("careChanel")}),component:p.a,required:!0,rules:[{required:!0,message:"".concat(te("pleaseSelectCareChanel"))}],propsComponent:{name:"radiogroup",disabled:H,placeholder:te("careChanel"),data:ie(x,H),showTextDisabled:!1}})),A.a.createElement(o.a,{span:12},A.a.createElement(h.d,{name:"status",label:te("status"),component:p.a,required:!le,rules:[{required:!le,message:"".concat(te("pleaseSelectCareStatus"))}],propsComponent:{disabled:le,placeholder:te("status"),data:N.a}}))),A.a.createElement(i.a,{gutter:12},A.a.createElement(o.a,{span:F?12:24},A.a.createElement(h.d,{name:"notiCategory",label:te("careType"),component:p.a,required:!0,rules:[{required:!0,message:"".concat(te("pleaseSelectCareType"))}],initialValue:P[x]||P.syntheticCustomer,propsComponent:{disabled:!z,allowClear:!1,placeholder:te("careType"),data:z?q?D:N.b:N.c}})),F&&A.a.createElement(o.a,{span:F?12:24},A.a.createElement(h.d,{name:"type",label:te("careGroup"),component:p.a,initialValue:x===T.a.customerCareTotal?null===w||void 0===w?void 0:null===(t=w.type)||void 0===t?void 0:t.id:void 0,propsComponent:{disabled:x===T.a.customerCareTotal,allowClear:!1,placeholder:te("careGroup"),data:B,accessorLabel:"name"}}))),A.a.createElement(i.a,{gutter:12},A.a.createElement(o.a,{span:24},A.a.createElement(h.d,{name:"result",label:te("careContent"),validateFirst:!0,required:!0,rules:[{required:!0,message:"".concat(te("pleaseEnterResultCare"))},{validator:S.e}],component:f.a,propsComponent:{maxLength:600,minRows:3}}))),A.a.createElement(i.a,null,A.a.createElement(o.a,{span:24},A.a.createElement("p",{className:"mb-0"},"".concat(te(U?"employeesCare":"creator"),": ").concat(null===J||void 0===J?void 0:J.firstName))))))}},